import {useMemo,useState} from 'react';import Logo from '@/components/Logo';import BrandCard from '@/components/BrandCard';import CouponCard from '@/components/CouponCard';import {BRANDS,COUPONS,CATEGORIES,brandById} from '@/lib/data';export default function Home(){const[q,setQ]=useState('');const score=c=>{const d=c.type==='percent'?c.discount:Math.min(50,Math.round(c.discount/20));const h=c.hot?30:0;const days=Math.max(0,Math.ceil((new Date(c.expires)-Date.now())/86400000));const u=Math.max(0,10-Math.floor(days/2));return d+h+u};const weeklyTop=useMemo(()=>[...COUPONS].sort((a,b)=>score(b)-score(a)).slice(0,9),[]);const filteredBrands=useMemo(()=>{if(!q)return BRANDS;const s=q.toLowerCase();return BRANDS.filter(b=>b.name.toLowerCase().includes(s)||b.description.toLowerCase().includes(s)||CATEGORIES.find(c=>c.id===b.category)?.name.toLowerCase().includes(s))},[q]);return(<><header className='header'><div className='container nav'><a href='/' aria-label='Forside'><Logo/></a><nav style={{display:'flex',gap:12,fontSize:14}}><a href='/kategori/elektronik'>Elektronik</a><a href='/kategori/mode'>Mode</a><a href='/kategori/software'>Software</a><a href='/kategori/gaming'>Gaming</a></nav></div></header><main><section className='hero'><div className='container'><div className='badge'>✨ Opdateret dagligt</div><h1>Danmarks bedste rabatkoder – <span style={{background:'linear-gradient(90deg,#6366f1,#10B981)',WebkitBackgroundClip:'text',color:'transparent'}}>kopiér & spar</span></h1><p className='small'>Find en butik, kopiér koden og køb via sikre links. Ingen oprettelse – bare besparelser.</p><div style={{position:'relative',maxWidth:560,marginTop:12}}><input className='input' placeholder='Søg brand, kategori eller kode…' value={q} onChange={e=>setQ(e.target.value)}/></div><div className='popchips'><span className='small'>Populært:</span><a className='chip' href='/brand/hellofresh'>HelloFresh</a><a className='chip' href='/brand/nordvpn'>NordVPN</a><a className='chip' href='/brand/proshop'>Proshop</a><a className='chip' href='/kategori/gaming'>Gaming</a></div></div></section><section className='container' style={{marginTop:24}}><div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}><h2>Ugens rabatkoder</h2><div className='small'>9 udvalgte</div></div><div className='grid grid-3'>{weeklyTop.map(c=><CouponCard key={c.id} coupon={c} brand={brandById(c.brand)}/>)}</div></section><section className='container' style={{marginTop:24}}><div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}><h2>Fremhævede brands</h2><a className='small' href='/kategori/elektronik'>Se alle</a></div><div className='grid grid-3'>{(q?filteredBrands:BRANDS.slice(0,6)).map(b=><BrandCard key={b.id} brand={b} count={COUPONS.filter(c=>c.brand===b.id).length}/>)}</div></section><section className='container' style={{marginTop:24}}><h2>Sådan virker det</h2><div className='grid grid-3'><div className='card'><b>Søg & find</b><div className='small'>Søg efter din butik eller kategori. Vi viser gyldige koder først.</div></div><div className='card'><b>Kopiér koden</b><div className='small'>Et klik, og koden er i udklipsholderen – klar ved kassen.</div></div><div className='card'><b>Spar med det samme</b><div className='small'>Klik “Gå til butik”, indsæt koden og nyd besparelsen.</div></div></div></section></main><footer className='footer'>© {new Date().getFullYear()} Panda Rabatkoder • <a href='/om'>Om</a> • <a href='/kontakt'>Kontakt</a> • <a href='/vilkar'>Vilkår</a> • <a href='/privatliv'>Privatliv</a> • <a href='/cookies'>Cookies</a></footer></>)})